(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84dfed7a"],{"2b3c":function(e,t,l){},"2dfc":function(e,t,l){"use strict";l("2b3c")},"64da":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.tableData,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),l("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),l("el-table-column",{attrs:{prop:"service_type",label:"应用类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["qianhou"===t.row.service_type?l("span",[e._v("前后端")]):e._e(),"hou"===t.row.service_type?l("span",[e._v("后端")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"部署方式",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["qianhou"===t.row.deploy_method?l("span",[e._v("前后分离")]):e._e(),"hou"===t.row.deploy_method?l("span",[e._v("后端静态")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"状态检测"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_open_check?l("span",[t.row.check_list.length>0?l("div",e._l(t.row.check_list,(function(t){return l("span",[l("el-button",{attrs:{type:t.value&&t.state?"success":"warning",size:"mini",plain:"",disabled:""}},[e._v(e._s(t.desc))])],1)})),0):e._e(),l("br")]):l("span",[l("el-button",{attrs:{type:"info",size:"mini",plain:"",disabled:""}},[e._v("未开启检测")])],1)]}}])}),l("el-table-column",{attrs:{prop:"desc",label:"描述"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",type:"primary"},on:{click:function(l){return e.handleView(t.$index,t.row)}}},[e._v(" 编辑 ")]),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),l("el-drawer",{attrs:{title:"",visible:e.drawer,direction:e.direction,"before-close":e.handleClose,size:"40%"},on:{"update:visible":function(t){e.drawer=t}}},[l("div",{staticStyle:{height:"600px",width:"80%",margin:"0 auto",overflow:"auto"}},[l("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"应用名称"}},[l("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),l("el-form-item",{attrs:{label:"项目描述"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),l("el-form-item",{attrs:{label:"部署服务器"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.host_id,callback:function(t){e.$set(e.form,"host_id",t)},expression:"form.host_id"}},e._l(e.host_list,(function(e){return l("el-option",{key:e.id,attrs:{label:e.ip,value:e.id}})})),1)],1),l("el-form-item",{attrs:{label:"应用类型"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.service_type,callback:function(t){e.$set(e.form,"service_type",t)},expression:"form.service_type"}},[l("el-option",{attrs:{label:"前后端项目",value:"qianhou"}}),l("el-option",{attrs:{label:"仅后端服务",value:"hou"}})],1)],1),"qianhou"===e.form.service_type?l("div",[l("el-form-item",{attrs:{label:"部署方式"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.deploy_method,callback:function(t){e.$set(e.form,"deploy_method",t)},expression:"form.deploy_method"}},[l("el-option",{attrs:{label:"前后分离",value:"qianhou"}}),l("el-option",{attrs:{label:"后端静态",value:"hou"}})],1)],1)],1):e._e(),l("div",[e._v(" 仓库 ： "),l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addGit}})],1),e._l(e.form.git_list,(function(t,a){return l("div",{key:a,staticClass:"git-continer",attrs:{prop:t.url}},[l("div",{staticClass:"git-inner-div"},[l("div",{staticStyle:{widht:"700px"}},[l("el-form-item",{attrs:{label:"url："}},[l("el-input",{model:{value:t.url,callback:function(l){e.$set(t,"url",l)},expression:"git.url"}})],1),l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{model:{value:t.desc,callback:function(l){e.$set(t,"desc",l)},expression:"git.desc"}})],1)],1),l("el-button",{on:{click:function(l){return l.preventDefault(),e.removeGit(t)}}},[e._v("删除")])],1)])})),l("br"),l("br"),l("el-form-item",{attrs:{label:"状态检测"}},[l("el-switch",{model:{value:e.form.is_open_check,callback:function(t){e.$set(e.form,"is_open_check",t)},expression:"form.is_open_check"}})],1),e.form.is_open_check?l("div",[l("span",{staticStyle:{width:"100px"}},[e._v("检测项 ：")]),l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addCheck}})],1):e._e(),e._l(e.form.check_list,(function(t,a){return l("div",{key:a,staticClass:"check-continer",attrs:{prop:t.url}},[l("div",{staticClass:"check-inner-div"},[l("el-form-item",{attrs:{label:"检测方式"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(l){e.$set(t,"type",l)},expression:"check.type"}},[l("el-option",{attrs:{label:"http",value:"http"}}),l("el-option",{attrs:{label:"tcp",value:"tcp"}})],1)],1),l("el-form-item",{attrs:{label:"内容"}},[l("el-input",{model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"check.value"}})],1),l("el-form-item",{attrs:{label:"间隔时间（秒）"}},[l("el-input",{model:{value:t.time,callback:function(l){e.$set(t,"time",l)},expression:"check.time"}})],1),l("el-form-item",{attrs:{label:"备注："}},[l("el-input",{model:{value:t.desc,callback:function(l){e.$set(t,"desc",l)},expression:"check.desc"}})],1),l("el-button",{on:{click:function(l){return l.preventDefault(),e.removeCheck(t)}}},[e._v("删除")])],1)])})),l("br"),l("br")],2)],1),l("el-button",{attrs:{type:"primary"},on:{click:e.onUpdate}},[e._v("Update")]),l("el-button",{on:{click:e.handleClose}},[e._v("Cancel")])],1)],1)},o=[],n=(l("a434"),l("b0c0"),l("ae84")),i=l("9d77"),r={data:function(){return{listLoading:!0,direction:"rtl",drawer:!1,drawerData:{},tableData:[],host_list:[],form:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(n["c"])().then((function(t){e.listLoading=!1,33===t.code?e.tableData=t.data:e.$message.error(t.data)}))},handleView:function(e,t){var l=this;console.log(e,t),this.drawer=!0,this.form=this.tableData[e],Object(i["c"])().then((function(e){33==e.code?l.host_list=e.data:l.$message.error(e.data)}))},handleDelete:function(e,t){var l=this;console.log(e,t),Object(n["b"])({id:t.id}).then((function(t){33==t.code?(l.tableData.splice(e,1),l.$message("handleDelete ok")):l.$message.error(t.data)}))},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(l){t.drawerData={},e()})).catch((function(e){}))},onUpdate:function(){var e=this;""!=this.form.name&&""!=this.form.host_id?Object(n["d"])(this.form).then((function(t){33==t.code?e.$message("onUpdate ok"):e.$message.error(t.data)})):this.$message.error("必填项不能为空")},addGit:function(){this.form.git_list.push({url:"",desc:""})},removeGit:function(e){var t=this.form.git_list.indexOf(e);-1!==t&&this.form.git_list.splice(t,1)},addCheck:function(){this.form.check_list.push({type:"",value:"",time:"",desc:""})},removeCheck:function(e){var t=this.form.check_list.indexOf(e);-1!==t&&this.form.check_list.splice(t,1)}}},s=r,c=(l("2dfc"),l("2877")),u=Object(c["a"])(s,a,o,!1,null,"20e71dd0",null);t["default"]=u.exports},"9d77":function(e,t,l){"use strict";l.d(t,"a",(function(){return o})),l.d(t,"b",(function(){return n})),l.d(t,"d",(function(){return i})),l.d(t,"c",(function(){return r}));var a=l("b775");function o(e){return Object(a["a"])({url:"/myhost/Add",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/myhost/Del",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/myhost/Update",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/myhost/GetList",method:"post",data:e})}},a434:function(e,t,l){"use strict";var a=l("23e7"),o=l("23cb"),n=l("a691"),i=l("50c4"),r=l("7b0b"),s=l("65f0"),c=l("8418"),u=l("1dde"),d=l("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var l,a,u,d,f,m,_=r(this),k=i(_.length),y=o(e,k),g=arguments.length;if(0===g?l=a=0:1===g?(l=0,a=k-y):(l=g-2,a=h(p(n(t),0),k-y)),k+l-a>b)throw TypeError(v);for(u=s(_,a),d=0;d<a;d++)f=y+d,f in _&&c(u,d,_[f]);if(u.length=a,l<a){for(d=y;d<k-a;d++)f=d+a,m=d+l,f in _?_[m]=_[f]:delete _[m];for(d=k;d>k-a+l;d--)delete _[d-1]}else if(l>a)for(d=k-a;d>y;d--)f=d+a-1,m=d+l-1,f in _?_[m]=_[f]:delete _[m];for(d=0;d<l;d++)_[d+y]=arguments[d+2];return _.length=k-a+l,u}})},ae84:function(e,t,l){"use strict";l.d(t,"a",(function(){return o})),l.d(t,"b",(function(){return n})),l.d(t,"d",(function(){return i})),l.d(t,"c",(function(){return r}));var a=l("b775");function o(e){return Object(a["a"])({url:"/myservice/Add",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/myservice/Del",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/myservice/Update",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/myservice/GetList",method:"post",data:e})}}}]);