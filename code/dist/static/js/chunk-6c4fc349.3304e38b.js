(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c4fc349"],{"6a2c":function(t,e,i){"use strict";i("9734")},"89f4":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":t.labelPosition}},[i("el-form-item",{attrs:{label:"*应用名称"}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"项目描述"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),i("el-form-item",{attrs:{label:"*部署服务器"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.host_id,callback:function(e){t.$set(t.form,"host_id",e)},expression:"form.host_id"}},t._l(t.host_list,(function(t){return i("el-option",{key:t.id,attrs:{label:t.ip,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"应用类型"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.service_type,callback:function(e){t.$set(t.form,"service_type",e)},expression:"form.service_type"}},[i("el-option",{attrs:{label:"前后端项目",value:"qianhou"}}),i("el-option",{attrs:{label:"仅后端服务",value:"hou"}})],1)],1),"qianhou"===t.form.service_type?i("div",[i("el-form-item",{attrs:{label:"部署方式"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.deploy_method,callback:function(e){t.$set(t.form,"deploy_method",e)},expression:"form.deploy_method"}},[i("el-option",{attrs:{label:"前后分离",value:"qianhou"}}),i("el-option",{attrs:{label:"后端静态",value:"hou"}})],1)],1)],1):t._e(),i("div",[t._v(" 仓库 ： "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addGit}})],1),t._l(t.form.git_list,(function(e,r){return i("div",{key:r,staticClass:"git-continer",attrs:{prop:e.url}},[i("div",{staticClass:"git-inner-div"},[i("div",{staticStyle:{widht:"700px"}},[i("el-form-item",{attrs:{label:"url："}},[i("el-input",{model:{value:e.url,callback:function(i){t.$set(e,"url",i)},expression:"git.url"}})],1),i("el-form-item",{attrs:{label:"备注："}},[i("el-input",{model:{value:e.desc,callback:function(i){t.$set(e,"desc",i)},expression:"git.desc"}})],1)],1),i("el-button",{on:{click:function(i){return i.preventDefault(),t.removeGit(e)}}},[t._v("删除")])],1)])})),i("br"),i("br"),i("el-form-item",{attrs:{label:"状态检测"}},[i("el-switch",{model:{value:t.form.is_open_check,callback:function(e){t.$set(t.form,"is_open_check",e)},expression:"form.is_open_check"}})],1),i("div",[i("span",{staticStyle:{width:"100px"}},[t._v("检测项 ：")]),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addCheck}})],1),t._l(t.form.check_list,(function(e,r){return i("div",{key:r,staticClass:"check-continer",attrs:{prop:e.url}},[i("div",{staticClass:"check-inner-div"},[i("el-form-item",{attrs:{label:"检测方式"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(i){t.$set(e,"type",i)},expression:"check.type"}},[i("el-option",{attrs:{label:"http",value:"http"}}),i("el-option",{attrs:{label:"tcp",value:"tcp"}})],1)],1),i("el-form-item",{attrs:{label:"内容"}},[i("el-input",{model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"check.value"}})],1),i("el-form-item",{attrs:{label:"间隔时间（秒）"}},[i("el-input",{model:{value:e.time,callback:function(i){t.$set(e,"time",i)},expression:"check.time"}})],1),i("el-form-item",{attrs:{label:"备注："}},[i("el-input",{model:{value:e.desc,callback:function(i){t.$set(e,"desc",i)},expression:"check.desc"}})],1),i("el-button",{on:{click:function(i){return i.preventDefault(),t.removeCheck(e)}}},[t._v("删除")])],1)])})),i("br"),i("br"),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存")])],1)],2)],1)},o=[],l=(i("a434"),i("498a"),i("b0c0"),i("9d77")),n=i("ae84"),s={data:function(){return{labelPosition:"left",host_list:[],form:{name:"",desc:"",host_id:"",service_type:"",deploy_method:"",git_list:[],is_open_check:!1,check_list:[]}}},created:function(){this.fetchData()},methods:{addGit:function(){this.form.git_list.push({url:"",desc:""})},removeGit:function(t){var e=this.form.git_list.indexOf(t);-1!==e&&this.form.git_list.splice(e,1)},addCheck:function(){this.form.check_list.push({type:"",value:"",time:"",desc:""})},removeCheck:function(t){var e=this.form.check_list.indexOf(t);-1!==e&&this.form.check_list.splice(e,1)},fetchData:function(){var t=this;Object(l["c"])().then((function(e){33==e.code?t.host_list=e.data:t.$message.error(e.data)}))},onSubmit:function(){var t=this;if(console.log(this.form),this.form.git_list.length>0)for(var e=0;e<this.form.git_list.length;e++){var i=this.form.git_list[e];if(""===i.url.trim())return void this.$message.error("仓库git项不能为空")}if(this.form.check_list.length>0)for(var r=0;r<this.form.check_list.length;r++){var o=this.form.check_list[r];if(""===o.type.trim()||""===o.value.trim()||""===o.time.trim())return void this.$message.error("检测项不能为空")}""!=this.form.name&&""!=this.form.host_id?Object(n["a"])(this.form).then((function(e){33==e.code?t.$message("submit!"):t.$message.error(e.data)})):this.$message.error("必填项不能为空")}}},a=s,c=(i("6a2c"),i("2877")),u=Object(c["a"])(a,r,o,!1,null,"2c8b7a56",null);e["default"]=u.exports},9734:function(t,e,i){},"9d77":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return n})),i.d(e,"c",(function(){return s}));var r=i("b775");function o(t){return Object(r["a"])({url:"/myhost/Add",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/myhost/Del",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/myhost/Update",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/myhost/GetList",method:"post",data:t})}},a434:function(t,e,i){"use strict";var r=i("23e7"),o=i("23cb"),l=i("a691"),n=i("50c4"),s=i("7b0b"),a=i("65f0"),c=i("8418"),u=i("1dde"),m=i("ae40"),f=u("splice"),d=m("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!d},{splice:function(t,e){var i,r,u,m,f,d,_=s(this),k=n(_.length),y=o(t,k),g=arguments.length;if(0===g?i=r=0:1===g?(i=0,r=k-y):(i=g-2,r=p(h(l(e),0),k-y)),k+i-r>v)throw TypeError(b);for(u=a(_,r),m=0;m<r;m++)f=y+m,f in _&&c(u,m,_[f]);if(u.length=r,i<r){for(m=y;m<k-r;m++)f=m+r,d=m+i,f in _?_[d]=_[f]:delete _[d];for(m=k;m>k-r+i;m--)delete _[m-1]}else if(i>r)for(m=k-r;m>y;m--)f=m+r-1,d=m+i-1,f in _?_[d]=_[f]:delete _[d];for(m=0;m<i;m++)_[m+y]=arguments[m+2];return _.length=k-r+i,u}})},ae84:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return n})),i.d(e,"c",(function(){return s}));var r=i("b775");function o(t){return Object(r["a"])({url:"/myservice/Add",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/myservice/Del",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/myservice/Update",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/myservice/GetList",method:"post",data:t})}}}]);